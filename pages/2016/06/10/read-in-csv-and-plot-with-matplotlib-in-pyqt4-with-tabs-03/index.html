<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>read in csv and plot with matplotlib in PyQt4 with tabs 03 &mdash; pydata</title>
  <meta name="author" content="shm">






  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="/favicon.png" rel="icon">

  <link href="/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">

  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="/">pydata</a></h1>
    <h2>Keep Looking, Don't Settle</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>

<form class="search" action="/search.html">
    <input type="text" class="search-query" placeholder="Search" name="q" id="s">
</form>

<form action="https://www.google.com/search" method="get">
    <fieldset role="search">
       <input type="hidden" name="q" value="site:songhuiming.github.io" />
       <input class="search" type="text" name="q" results="0" placeholder="Search"/>
    </fieldset>
</form>


<ul class="main-navigation">
    <li><a href="/functions/archives.html">Archives</a></li>
      <li >
        <a href="/category/linux.html">Linux</a>
      </li>
      <li >
        <a href="/category/programming.html">Programming</a>
      </li>
      <li class="active">
        <a href="/category/python.html">Python</a>
      </li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">read in csv and plot with matplotlib in PyQt4 with tabs 03</h1>
    <p class="meta">
<time datetime="2016-06-10T00:00:00-05:00" pubdate>Fri 10 June 2016</time>    </p>
</header>

  <div class="entry-content"><p>跟第二版|第一版的区别：
1. 主窗口从<code>QMainWindow</code>继承过来，而不是从<code>QWidget</code>. 所有的控件加载在main_frame (main_frame 是一个<code>QWidget</code>)上，然后<code>QWidget</code>加载到<code>QMainWindow</code>上</p>
<ol>
<li>
<p>每个tab是一个<code>QWidget</code>, 三个tab都放在tab_frame (<code>QTabWidget</code>)上，然后tab_frame加载到main_frame的gridlayout上</p>
</li>
<li>
<p>在每个tab上都能看到import_csv和combobox，所以它们跟tab_frame平级，被加载到main_frame的gridlayout上</p>
</li>
<li>
<p>模块化一些产生控件的code. 比如<code>create_menu</code>, <code>create_status_bar</code>, <code>create_main_frame</code>， <code>create_action</code>等等</p>
</li>
<li>
<p>df在tab2上可以使用<code>to_string</code>或者<code>to_html</code>，使用<code>to_string</code>需要改字体，否则不对齐</p>
</li>
<li>
<p>model原来的格式是<code>scipy.summary</code>，没有<code>to_string</code>或者<code>to_html</code>，只能用<code>str</code>强制转换为string，然后改字体显示</p>
</li>
</ol>
<p>To do next:</p>
<ol>
<li>
<p>添加选项：plot的时候可以选择plot哪些变量</p>
</li>
<li>
<p>处理异常</p>
</li>
</ol>
<div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">20160610 in v5: add tabs(QTabWidget) to the QMainWindow</span>

<span class="sd">20160531 in v4: try to re-arrange the widgets with QMainWindow</span>

<span class="sd">20160516: in v3, try to read in the csv file through menu rather than do this in the code, but v3 does not work</span>

<span class="sd">20160516: in v2, try to use dropdown menu to select data</span>

<span class="sd">20160515 in this v1, we can input the rating and year_quarter in the first and second cell of the table and then plot the result.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="kn">from</span> <span class="nn">PyQt4</span> <span class="kn">import</span> <span class="n">QtGui</span><span class="p">,</span> <span class="n">QtCore</span>
<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">style</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_qt4agg</span> <span class="kn">import</span> <span class="n">FigureCanvasQTAgg</span> <span class="k">as</span> <span class="n">FigureCanvas</span>

<span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;ggplot&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">PrettyWidget</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QMainWindow</span><span class="p">):</span>


    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PrettyWidget</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">&#39;Revision on Plots, Tables and File Browser&#39;</span><span class="p">)</span>     

        <span class="bp">self</span><span class="o">.</span><span class="n">create_menu</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_main_frame</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_status_bar</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">create_main_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">main_frame</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_tabs</span><span class="p">()</span>

        <span class="c1"># add grid on main_frame to put the widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QGridLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">)</span>

        <span class="c1">#Import CSV Button</span>
        <span class="n">btn1</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s1">&#39;Import CSV&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">btn1</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">btn1</span><span class="o">.</span><span class="n">sizeHint</span><span class="p">())</span>
        <span class="n">btn1</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getCSV</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">btn1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

        <span class="c1">#DropDown mean / comboBox</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rating_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yq_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QComboBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rating_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox2</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QComboBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox2</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yq_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comboBox2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">main_frame</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">add_tabs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTabWidget</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab1</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab2</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab3</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>

        <span class="c1">#Grid Layout</span>
        <span class="n">grid</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QGridLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>

        <span class="c1">#Canvas and Toolbar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>    
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="n">FigureCanvas</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>     
        <span class="n">grid</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>


        <span class="c1">#Plot Button</span>
        <span class="n">btn2</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s1">&#39;Plot&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">btn2</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">btn2</span><span class="o">.</span><span class="n">sizeHint</span><span class="p">())</span>    
        <span class="n">btn2</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">)</span>
        <span class="n">grid</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">btn2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

        <span class="c1"># add Widget to the Tabs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab1</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>
        <span class="c1"># add Tabs to the tab_frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab1</span><span class="p">,</span> <span class="s2">&quot;Plot Data&quot;</span><span class="p">)</span>



        <span class="c1"># prepare for the 2nd tab</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab2Form</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFormLayout</span><span class="p">()</span>

        <span class="n">btn3</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s1">&#39;Print Data&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">btn3</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">btn3</span><span class="o">.</span><span class="n">sizeHint</span><span class="p">())</span>    
        <span class="n">btn3</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">print_data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab2Form</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="n">btn3</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">textEdit</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTextEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textEdit</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab2Form</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textEdit</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab2</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab2Form</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab2</span><span class="p">,</span> <span class="s2">&quot;Show Data&quot;</span><span class="p">)</span>




        <span class="c1"># prepare for the 3rd tab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">creSelectModel</span> <span class="o">=</span> <span class="p">{</span><span class="s1">u&#39;I-5&#39;</span><span class="p">:</span> <span class="s1">&#39;                            OLS Regression Results                            </span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n</span><span class="s1">Dep. Variable:             cum_pd_num   R-squared:                       0.300</span><span class="se">\n</span><span class="s1">Model:                            OLS   Adj. R-squared:                  0.296</span><span class="se">\n</span><span class="s1">Method:                 Least Squares   F-statistic:                     65.09</span><span class="se">\n</span><span class="s1">Date:                Fri, 10 Jun 2016   Prob (F-statistic):           4.89e-35</span><span class="se">\n</span><span class="s1">Time:                        11:52:53   Log-Likelihood:                -569.34</span><span class="se">\n</span><span class="s1">No. Observations:                 459   AIC:                             1147.</span><span class="se">\n</span><span class="s1">Df Residuals:                     455   BIC:                             1163.</span><span class="se">\n</span><span class="s1">Df Model:                           3                                         </span><span class="se">\n</span><span class="s1">Covariance Type:            nonrobust                                         </span><span class="se">\n</span><span class="s1">==================================================================================</span><span class="se">\n</span><span class="s1">                     coef    std err          t      P&gt;|t|      [95.0% Conf. Int.]</span><span class="se">\n</span><span class="s1">----------------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">Intercept         -0.2968      0.133     -2.233      0.026        -0.558    -0.036</span><span class="se">\n</span><span class="s1">hpi_yoy_v4        -0.1735      0.013    -13.451      0.000        -0.199    -0.148</span><span class="se">\n</span><span class="s1">realgpd_yoy_v4     0.1414      0.024      5.770      0.000         0.093     0.190</span><span class="se">\n</span><span class="s1">bbbspr_p0          0.3096      0.057      5.393      0.000         0.197     0.422</span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n</span><span class="s1">Omnibus:                        9.755   Durbin-Watson:                   0.530</span><span class="se">\n</span><span class="s1">Prob(Omnibus):                  0.008   Jarque-Bera (JB):                9.746</span><span class="se">\n</span><span class="s1">Skew:                           0.342   Prob(JB):                      0.00765</span><span class="se">\n</span><span class="s1">Kurtosis:                       3.207   Cond. No.                         22.7</span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n\n</span><span class="s1">Warnings:</span><span class="se">\n</span><span class="s1">[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.&#39;</span><span class="p">,</span>
 <span class="s1">u&#39;I-6&#39;</span><span class="p">:</span> <span class="s1">&#39;                            OLS Regression Results                            </span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n</span><span class="s1">Dep. Variable:             cum_pd_num   R-squared:                       0.379</span><span class="se">\n</span><span class="s1">Model:                            OLS   Adj. R-squared:                  0.375</span><span class="se">\n</span><span class="s1">Method:                 Least Squares   F-statistic:                     98.68</span><span class="se">\n</span><span class="s1">Date:                Fri, 10 Jun 2016   Prob (F-statistic):           6.81e-50</span><span class="se">\n</span><span class="s1">Time:                        11:52:53   Log-Likelihood:                -578.73</span><span class="se">\n</span><span class="s1">No. Observations:                 490   AIC:                             1165.</span><span class="se">\n</span><span class="s1">Df Residuals:                     486   BIC:                             1182.</span><span class="se">\n</span><span class="s1">Df Model:                           3                                         </span><span class="se">\n</span><span class="s1">Covariance Type:            nonrobust                                         </span><span class="se">\n</span><span class="s1">==================================================================================</span><span class="se">\n</span><span class="s1">                     coef    std err          t      P&gt;|t|      [95.0% Conf. Int.]</span><span class="se">\n</span><span class="s1">----------------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">Intercept         -0.7677      0.121     -6.340      0.000        -1.006    -0.530</span><span class="se">\n</span><span class="s1">realgpd_yoy_v0     0.4787      0.028     17.105      0.000         0.424     0.534</span><span class="se">\n</span><span class="s1">hpi_yoy_v0        -0.2601      0.020    -12.827      0.000        -0.300    -0.220</span><span class="se">\n</span><span class="s1">bbbspr_p1          0.2896      0.048      5.972      0.000         0.194     0.385</span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n</span><span class="s1">Omnibus:                       10.685   Durbin-Watson:                   0.600</span><span class="se">\n</span><span class="s1">Prob(Omnibus):                  0.005   Jarque-Bera (JB):               11.829</span><span class="se">\n</span><span class="s1">Skew:                           0.280   Prob(JB):                      0.00270</span><span class="se">\n</span><span class="s1">Kurtosis:                       3.516   Cond. No.                         17.0</span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n\n</span><span class="s1">Warnings:</span><span class="se">\n</span><span class="s1">[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.&#39;</span><span class="p">,</span>
 <span class="s1">u&#39;I-7&#39;</span><span class="p">:</span> <span class="s1">&#39;                            OLS Regression Results                            </span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n</span><span class="s1">Dep. Variable:             cum_pd_num   R-squared:                       0.379</span><span class="se">\n</span><span class="s1">Model:                            OLS   Adj. R-squared:                  0.375</span><span class="se">\n</span><span class="s1">Method:                 Least Squares   F-statistic:                     112.8</span><span class="se">\n</span><span class="s1">Date:                Fri, 10 Jun 2016   Prob (F-statistic):           5.14e-57</span><span class="se">\n</span><span class="s1">Time:                        11:52:53   Log-Likelihood:                -660.17</span><span class="se">\n</span><span class="s1">No. Observations:                 559   AIC:                             1328.</span><span class="se">\n</span><span class="s1">Df Residuals:                     555   BIC:                             1346.</span><span class="se">\n</span><span class="s1">Df Model:                           3                                         </span><span class="se">\n</span><span class="s1">Covariance Type:            nonrobust                                         </span><span class="se">\n</span><span class="s1">==================================================================================</span><span class="se">\n</span><span class="s1">                     coef    std err          t      P&gt;|t|      [95.0% Conf. Int.]</span><span class="se">\n</span><span class="s1">----------------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">Intercept          0.1953      0.061      3.189      0.002         0.075     0.316</span><span class="se">\n</span><span class="s1">hpi_yoy_v4        -0.1599      0.009    -17.721      0.000        -0.178    -0.142</span><span class="se">\n</span><span class="s1">realgpd_yoy_v3     0.2450      0.019     12.651      0.000         0.207     0.283</span><span class="se">\n</span><span class="s1">hpi_yoy_p0         0.0645      0.021      3.123      0.002         0.024     0.105</span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n</span><span class="s1">Omnibus:                       12.869   Durbin-Watson:                   0.390</span><span class="se">\n</span><span class="s1">Prob(Omnibus):                  0.002   Jarque-Bera (JB):               13.261</span><span class="se">\n</span><span class="s1">Skew:                           0.340   Prob(JB):                      0.00132</span><span class="se">\n</span><span class="s1">Kurtosis:                       3.327   Cond. No.                         12.0</span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n\n</span><span class="s1">Warnings:</span><span class="se">\n</span><span class="s1">[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.&#39;</span><span class="p">,</span>
 <span class="s1">u&#39;I234&#39;</span><span class="p">:</span> <span class="s1">&#39;                            OLS Regression Results                            </span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n</span><span class="s1">Dep. Variable:             cum_pd_num   R-squared:                       0.221</span><span class="se">\n</span><span class="s1">Model:                            OLS   Adj. R-squared:                  0.216</span><span class="se">\n</span><span class="s1">Method:                 Least Squares   F-statistic:                     52.39</span><span class="se">\n</span><span class="s1">Date:                Fri, 10 Jun 2016   Prob (F-statistic):           7.95e-30</span><span class="se">\n</span><span class="s1">Time:                        11:52:53   Log-Likelihood:                -723.50</span><span class="se">\n</span><span class="s1">No. Observations:                 559   AIC:                             1455.</span><span class="se">\n</span><span class="s1">Df Residuals:                     555   BIC:                             1472.</span><span class="se">\n</span><span class="s1">Df Model:                           3                                         </span><span class="se">\n</span><span class="s1">Covariance Type:            nonrobust                                         </span><span class="se">\n</span><span class="s1">==================================================================================</span><span class="se">\n</span><span class="s1">                     coef    std err          t      P&gt;|t|      [95.0% Conf. Int.]</span><span class="se">\n</span><span class="s1">----------------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">Intercept         -1.1037      0.119     -9.262      0.000        -1.338    -0.870</span><span class="se">\n</span><span class="s1">bbbspr_p4          0.4396      0.044      9.882      0.000         0.352     0.527</span><span class="se">\n</span><span class="s1">houpri_yoy_v0     -0.0169      0.005     -3.275      0.001        -0.027    -0.007</span><span class="se">\n</span><span class="s1">realgpd_yoy_v4     0.1115      0.019      5.962      0.000         0.075     0.148</span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n</span><span class="s1">Omnibus:                       41.424   Durbin-Watson:                   0.544</span><span class="se">\n</span><span class="s1">Prob(Omnibus):                  0.000   Jarque-Bera (JB):               91.059</span><span class="se">\n</span><span class="s1">Skew:                           0.419   Prob(JB):                     1.69e-20</span><span class="se">\n</span><span class="s1">Kurtosis:                       4.791   Cond. No.                         30.5</span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n\n</span><span class="s1">Warnings:</span><span class="se">\n</span><span class="s1">[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.&#39;</span><span class="p">,</span>
 <span class="s1">u&#39;P&#39;</span><span class="p">:</span> <span class="s1">&#39;                            OLS Regression Results                            </span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n</span><span class="s1">Dep. Variable:             cum_pd_num   R-squared:                       0.618</span><span class="se">\n</span><span class="s1">Model:                            OLS   Adj. R-squared:                  0.614</span><span class="se">\n</span><span class="s1">Method:                 Least Squares   F-statistic:                     161.5</span><span class="se">\n</span><span class="s1">Date:                Fri, 10 Jun 2016   Prob (F-statistic):           3.85e-82</span><span class="se">\n</span><span class="s1">Time:                        11:52:53   Log-Likelihood:                -379.98</span><span class="se">\n</span><span class="s1">No. Observations:                 405   AIC:                             770.0</span><span class="se">\n</span><span class="s1">Df Residuals:                     400   BIC:                             790.0</span><span class="se">\n</span><span class="s1">Df Model:                           4                                         </span><span class="se">\n</span><span class="s1">Covariance Type:            nonrobust                                         </span><span class="se">\n</span><span class="s1">==================================================================================</span><span class="se">\n</span><span class="s1">                     coef    std err          t      P&gt;|t|      [95.0% Conf. Int.]</span><span class="se">\n</span><span class="s1">----------------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">Intercept          1.0522      0.091     11.587      0.000         0.874     1.231</span><span class="se">\n</span><span class="s1">bbbspr_v0         -0.3435      0.030    -11.328      0.000        -0.403    -0.284</span><span class="se">\n</span><span class="s1">hpi_yoy_v4        -0.1694      0.009    -19.013      0.000        -0.187    -0.152</span><span class="se">\n</span><span class="s1">realgpd_yoy_v3     0.2943      0.018     16.700      0.000         0.260     0.329</span><span class="se">\n</span><span class="s1">hpi_yoy_p4         0.0049      0.012      0.417      0.677        -0.018     0.028</span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n</span><span class="s1">Omnibus:                        3.443   Durbin-Watson:                   0.340</span><span class="se">\n</span><span class="s1">Prob(Omnibus):                  0.179   Jarque-Bera (JB):                3.477</span><span class="se">\n</span><span class="s1">Skew:                          -0.127   Prob(JB):                        0.176</span><span class="se">\n</span><span class="s1">Kurtosis:                       3.376   Cond. No.                         19.8</span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n\n</span><span class="s1">Warnings:</span><span class="se">\n</span><span class="s1">[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.&#39;</span><span class="p">,</span>
 <span class="s1">u&#39;S-1&#39;</span><span class="p">:</span> <span class="s1">&#39;                            OLS Regression Results                            </span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n</span><span class="s1">Dep. Variable:             cum_pd_num   R-squared:                       0.364</span><span class="se">\n</span><span class="s1">Model:                            OLS   Adj. R-squared:                  0.358</span><span class="se">\n</span><span class="s1">Method:                 Least Squares   F-statistic:                     62.47</span><span class="se">\n</span><span class="s1">Date:                Fri, 10 Jun 2016   Prob (F-statistic):           9.87e-42</span><span class="se">\n</span><span class="s1">Time:                        11:52:53   Log-Likelihood:                -527.23</span><span class="se">\n</span><span class="s1">No. Observations:                 442   AIC:                             1064.</span><span class="se">\n</span><span class="s1">Df Residuals:                     437   BIC:                             1085.</span><span class="se">\n</span><span class="s1">Df Model:                           4                                         </span><span class="se">\n</span><span class="s1">Covariance Type:            nonrobust                                         </span><span class="se">\n</span><span class="s1">==================================================================================</span><span class="se">\n</span><span class="s1">                     coef    std err          t      P&gt;|t|      [95.0% Conf. Int.]</span><span class="se">\n</span><span class="s1">----------------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">Intercept          0.3138      0.061      5.149      0.000         0.194     0.434</span><span class="se">\n</span><span class="s1">hpi_yoy_v1        -0.1550      0.020     -7.806      0.000        -0.194    -0.116</span><span class="se">\n</span><span class="s1">realgpd_yoy_v1     0.4148      0.030     14.016      0.000         0.357     0.473</span><span class="se">\n</span><span class="s1">houpri_yoy_v3     -0.0715      0.009     -7.664      0.000        -0.090    -0.053</span><span class="se">\n</span><span class="s1">realgpd_yoy_p4    -0.0693      0.020     -3.386      0.001        -0.109    -0.029</span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n</span><span class="s1">Omnibus:                       24.929   Durbin-Watson:                   0.447</span><span class="se">\n</span><span class="s1">Prob(Omnibus):                  0.000   Jarque-Bera (JB):               41.698</span><span class="se">\n</span><span class="s1">Skew:                           0.387   Prob(JB):                     8.82e-10</span><span class="se">\n</span><span class="s1">Kurtosis:                       4.290   Cond. No.                         16.5</span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n\n</span><span class="s1">Warnings:</span><span class="se">\n</span><span class="s1">[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.&#39;</span><span class="p">,</span>
 <span class="s1">u&#39;S234&#39;</span><span class="p">:</span> <span class="s1">&#39;                            OLS Regression Results                            </span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n</span><span class="s1">Dep. Variable:             cum_pd_num   R-squared:                       0.493</span><span class="se">\n</span><span class="s1">Model:                            OLS   Adj. R-squared:                  0.489</span><span class="se">\n</span><span class="s1">Method:                 Least Squares   F-statistic:                     123.4</span><span class="se">\n</span><span class="s1">Date:                Fri, 10 Jun 2016   Prob (F-statistic):           7.29e-56</span><span class="se">\n</span><span class="s1">Time:                        11:52:53   Log-Likelihood:                -415.58</span><span class="se">\n</span><span class="s1">No. Observations:                 385   AIC:                             839.2</span><span class="se">\n</span><span class="s1">Df Residuals:                     381   BIC:                             855.0</span><span class="se">\n</span><span class="s1">Df Model:                           3                                         </span><span class="se">\n</span><span class="s1">Covariance Type:            nonrobust                                         </span><span class="se">\n</span><span class="s1">==================================================================================</span><span class="se">\n</span><span class="s1">                     coef    std err          t      P&gt;|t|      [95.0% Conf. Int.]</span><span class="se">\n</span><span class="s1">----------------------------------------------------------------------------------</span><span class="se">\n</span><span class="s1">Intercept          0.1197      0.062      1.941      0.053        -0.002     0.241</span><span class="se">\n</span><span class="s1">hpi_yoy_v4        -0.1834      0.010    -17.684      0.000        -0.204    -0.163</span><span class="se">\n</span><span class="s1">realgpd_yoy_v3     0.3077      0.021     14.796      0.000         0.267     0.349</span><span class="se">\n</span><span class="s1">hpi_yoy_p1         0.0403      0.017      2.305      0.022         0.006     0.075</span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n</span><span class="s1">Omnibus:                       51.316   Durbin-Watson:                   0.378</span><span class="se">\n</span><span class="s1">Prob(Omnibus):                  0.000   Jarque-Bera (JB):              103.615</span><span class="se">\n</span><span class="s1">Skew:                           0.732   Prob(JB):                     3.16e-23</span><span class="se">\n</span><span class="s1">Kurtosis:                       5.078   Cond. No.                         10.1</span><span class="se">\n</span><span class="s1">==============================================================================</span><span class="se">\n\n</span><span class="s1">Warnings:</span><span class="se">\n</span><span class="s1">[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.&#39;</span><span class="p">}</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">tab3Form</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFormLayout</span><span class="p">()</span>

        <span class="n">btn4</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="s1">&#39;Show Model&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">btn4</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">btn4</span><span class="o">.</span><span class="n">sizeHint</span><span class="p">())</span>    
        <span class="n">btn4</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_model</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab3Form</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="n">btn4</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">textEdit3</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTextEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textEdit3</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab3Form</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textEdit3</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tab3</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab3Form</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tab_frame</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab3</span><span class="p">,</span> <span class="s2">&quot;Show Model&quot;</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">show_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">font</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFont</span><span class="p">()</span>
        <span class="n">font</span><span class="o">.</span><span class="n">setFamily</span><span class="p">(</span><span class="s1">&#39;Lucida&#39;</span><span class="p">)</span>
        <span class="n">font</span><span class="o">.</span><span class="n">setFixedPitch</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">font</span><span class="o">.</span><span class="n">setPointSize</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textEdit3</span><span class="o">.</span><span class="n">setCurrentFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span>

        <span class="n">selmodel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">creSelectModel</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">())]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textEdit3</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">selmodel</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">print_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">font</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFont</span><span class="p">()</span>
        <span class="n">font</span><span class="o">.</span><span class="n">setFamily</span><span class="p">(</span><span class="s1">&#39;Lucida&#39;</span><span class="p">)</span>
        <span class="n">font</span><span class="o">.</span><span class="n">setFixedPitch</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">font</span><span class="o">.</span><span class="n">setPointSize</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

        <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">rating</span> <span class="o">==</span>  <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()))</span> <span class="o">&amp;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">yq</span> <span class="o">==</span>  <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comboBox2</span><span class="o">.</span><span class="n">currentText</span><span class="p">()))),</span> <span class="p">:]</span>
        <span class="c1"># self.textEdit.setText(p1.to_html(col_space = 10, index = False, justify = &quot;right&quot;))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textEdit</span><span class="o">.</span><span class="n">setCurrentFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">create_status_bar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_text</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Please load the csv file: ca_cni_camacro_20160531.csv!!&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">status_text</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">menuBar</span><span class="p">()</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="s2">&quot;&amp;File&quot;</span><span class="p">)</span>
        <span class="n">open_action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_action</span><span class="p">(</span><span class="s2">&quot;&amp;Open File | Import CSV&quot;</span><span class="p">,</span> <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCSV</span><span class="p">)</span>
        <span class="n">quit_action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_action</span><span class="p">(</span><span class="s2">&quot;&amp;Quit&quot;</span><span class="p">,</span> <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">,</span> <span class="n">shortcut</span> <span class="o">=</span> <span class="s2">&quot;Ctrl+Q&quot;</span><span class="p">,</span> <span class="n">tip</span> <span class="o">=</span> <span class="s2">&quot;Close the App&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_actions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file_menu</span><span class="p">,</span> <span class="p">(</span><span class="n">open_action</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">quit_action</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">help_menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">menuBar</span><span class="p">()</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="s2">&quot;&amp;Help&quot;</span><span class="p">)</span>
        <span class="n">about_action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_action</span><span class="p">(</span><span class="s2">&quot;&amp;About&quot;</span><span class="p">,</span> <span class="n">shortcut</span> <span class="o">=</span> <span class="s1">&#39;F1&#39;</span><span class="p">,</span> <span class="n">slot</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_about</span><span class="p">(</span><span class="s2">&quot;About the App&quot;</span><span class="p">,</span> <span class="s2">&quot;Demo of IFRS9 PD Plot&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_actions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">help_menu</span><span class="p">,</span> <span class="p">(</span><span class="n">about_action</span><span class="p">,</span> <span class="p">))</span>

    <span class="k">def</span> <span class="nf">on_about</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg_title</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="n">QtGui</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">about</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg_title</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">add_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">actions</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">action</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">target</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">target</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">slot</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">shortcut</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">icon</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">tip</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">checkable</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">signal</span> <span class="o">=</span> <span class="s2">&quot;triggered()&quot;</span><span class="p">):</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">icon</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">action</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">shortcut</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">action</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="n">shortcut</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tip</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">action</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="n">tip</span><span class="p">)</span>
            <span class="n">action</span><span class="o">.</span><span class="n">setStatusTip</span><span class="p">(</span><span class="n">tip</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">slot</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="n">signal</span><span class="p">),</span> <span class="n">slot</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">checkable</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">action</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">action</span>


    <span class="k">def</span> <span class="nf">getCSV</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox2</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                                    <span class="s1">&#39;Single File&#39;</span><span class="p">,</span>
                                                    <span class="s1">&#39;~/Desktop/MyCSVFile&#39;</span><span class="p">,</span>
                                                    <span class="s1">&#39;*.csv&#39;</span><span class="p">)</span>
        <span class="k">print</span> <span class="n">filePath</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">filePath</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rating_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">rating</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yq_list</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">yq</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()]</span>       
        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rating_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comboBox2</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yq_list</span><span class="p">)</span>
        <span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">rating_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_text</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Loaded &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">filePath</span><span class="p">))</span>


    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

        <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">rating</span> <span class="o">==</span>  <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()))</span> <span class="o">&amp;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">yq</span> <span class="o">==</span>  <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comboBox2</span><span class="o">.</span><span class="n">currentText</span><span class="p">()))),</span> <span class="p">:]</span>
        <span class="k">print</span> <span class="n">p1</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>


        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Pred on data with Model&quot;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;adj Pred to non-decreasing&quot;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Fitting value in Model&quot;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Actual PD&quot;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Long Run Avg&quot;</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Canada C&amp;I PD Plot&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textEdit</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">center</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">qr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frameGeometry</span><span class="p">()</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QDesktopWidget</span><span class="p">()</span><span class="o">.</span><span class="n">availableGeometry</span><span class="p">()</span><span class="o">.</span><span class="n">center</span><span class="p">()</span>
        <span class="n">qr</span><span class="o">.</span><span class="n">moveCenter</span><span class="p">(</span><span class="n">cp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">qr</span><span class="o">.</span><span class="n">topLeft</span><span class="p">())</span>



<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">PrettyWidget</span><span class="p">()</span>
    <span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>


<p>Figure 1. tab1: show the plot
<img alt="png" src="/figures/20160610_pyqt_plot_ifrs9_pd_04.PNG" /></p>
<p>Figure 2. tab2: show the data
<img alt="png" src="/figures/20160610_pyqt_plot_ifrs9_pd_05.PNG" /></p>
<p>Figure 3. tab3: show the model
<img alt="png" src="/figures/20160610_pyqt_plot_ifrs9_pd_06.PNG" /></p></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">
        <a href="/author/huiming-song.html">Huiming Song</a>
    </span>
  </span>
<time datetime="2016-06-10T00:00:00-05:00" pubdate>Fri 10 June 2016</time>  <span class="categories">
    <a class='category' href='/category/python.html'>Python</a>
  </span>
  <span class="categories">
    <a class="category" href="/tag/python.html">python</a>,    <a class="category" href="/tag/pyqt.html">PyQt</a>  </span>
</p><div class="sharing">
</div>    </footer>
  </article>

</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="/pages/2016/06/10/read-in-csv-and-plot-with-matplotlib-in-pyqt4-with-tabs-03/">read in csv and plot with matplotlib in PyQt4 with tabs 03</a>
      </li>
      <li class="post">
          <a href="/pages/2016/06/01/read-in-csv-and-plot-with-matplotlib-in-pyqt4-02/">read in csv and plot with matplotlib in PyQt4 02</a>
      </li>
      <li class="post">
          <a href="/pages/2016/05/31/read-in-csv-and-plot-with-matplotlib-in-pyqt4/">read in csv and plot with matplotlib in PyQt4</a>
      </li>
      <li class="post">
          <a href="/pages/2016/05/26/figure-out-errors-in-cx_freeze/">figure out errors in cx_freeze</a>
      </li>
      <li class="post">
          <a href="/pages/2016/05/26/python-pyqt4-study-notes-01/">python PyQt4 study notes 01</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="/category/linux.html">linux</a></li>
        <li><a href="/category/programming.html">programming</a></li>
        <li><a href="/category/python.html">Python</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
    <a href="/tag/pelican.html">pelican</a>,    <a href="/tag/tkinter.html">tkinter</a>,    <a href="/tag/shiny.html">shiny</a>,    <a href="/tag/data-mining.html">data mining</a>,    <a href="/tag/python.html">python</a>,    <a href="/tag/numpy.html">numpy</a>,    <a href="/tag/sql.html">sql</a>,    <a href="/tag/pyqt.html">PyQt</a>,    <a href="/tag/data-minging.html">data minging</a>,    <a href="/tag/re.html">re</a>,    <a href="/tag/r.html">R</a>,    <a href="/tag/matplotlib.html">matplotlib</a>,    <a href="/tag/linux.html">linux</a>,    <a href="/tag/cx_freeze.html">cx_freeze</a>,    <a href="/tag/pandas.html">pandas</a>,    <a href="/tag/spyre.html">spyre</a>,    <a href="/tag/sklearn.html">sklearn</a>  </section>


    <section>
        <h1>Social</h1>
        <ul>
            <li><a href="https://www.linkedin.com/pub/huiming-song/24/735/349" target="_blank">Linkedin</a></li>
        </ul>
    </section>
    <section>
        <h1>Blogroll</h1>
        <ul>
            <li><a href="http://easysas.blogspot.com/" target="_blank">my old SAS blog</a></li>
        </ul>
    </section>

</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2015&ndash;2016  shm &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="/theme/js/modernizr-2.0.js"></script>
  <script src="/theme/js/ender.js"></script>
  <script src="/theme/js/octopress.js" type="text/javascript"></script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-65938411-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-65938411-1');
    ga('send', 'pageview');
</script>
  <script type="text/javascript">
    var disqus_shortname = 'songhuiming';
    var disqus_identifier = '/pages/2016/06/10/read-in-csv-and-plot-with-matplotlib-in-pyqt4-with-tabs-03/';
    var disqus_url = '/pages/2016/06/10/read-in-csv-and-plot-with-matplotlib-in-pyqt4-with-tabs-03/';
    var disqus_title = 'read in csv and plot with matplotlib in PyQt4 with tabs 03';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = "//" + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
  </script>
</body>
</html>